trigger:
- master

pool:
  vmImage: 'windows-latest'

steps:

- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
      echo "##vso[task.setvariable variable=JAVA_HOME]$(JAVA_HOME_11_X64)"
      echo "##vso[task.setvariable variable=PATH]$(JAVA_HOME_11_X64)\bin;$(PATH)"
  displayName: Setting up Java

- task: NuGetToolInstaller@1
  inputs:
    checkLatest: true
  displayName: Installing NuGet

- script: nuget install Microsoft.Net.Compilers && PATH=%PATH%;.\Microsoft.Net.Compilers.3.6.0\tools
  displayName: Installing .NET Compilers and adding them to PATH

- script: install.bat
  displayName: Installing JCC